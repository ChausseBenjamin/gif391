\ProvidesPackage{codeblocks}
[2023-09-06 v1.0.0 Code blocks with line numbers and shadows]

% Necessary packages:
\RequirePackage{xcolor}
\RequirePackage{listings}
\RequirePackage{tcolorbox}
\RequirePackage{textcomp}

% Load the tcolorbox library for listings:
\tcbuselibrary{listings,skins}

% Color definitions for code blocks {{{--------------------------
\definecolor{bg}{HTML}{edefe9}      % #edefe9 Background        |
\definecolor{linenb}{HTML}{D1CEC7}  % #D1CEC7 Line numbers      |
\definecolor{comment}{HTML}{B6AD9A} % #B6AD9A Comments          |
\definecolor{basic}{HTML}{B29762}   % #B29762 Non-special text  |
\definecolor{item}{HTML}{896724}    % #896724 List items        |
\definecolor{param}{HTML}{2D2006}   % #2D2006 Parameters        |
\definecolor{string}{HTML}{065289}  % #065289 Strings           |
\definecolor{keyword}{HTML}{718ECD} % #718ECD Keywords          |
% }}}------------------------------------------------------------

% YAML language definition {{{--------------------------------------
\lstdefinelanguage{YAML}{ %                                        |
  numbers=left, % Line numbers on the left                         |
  numbersep=5pt, % How far are line numbers from code              |
  sensitive=false, % Keywords are not case-sensitive               |
  morecomment=[l]{\#}, % Line-based comment                        |
  morecomment=[s]{/*}{*/}, % Block-based comment                   |
  morestring=[b]', % String with single quote                      |
  morestring=[b]", % String with double quote                      |
  keywords={true,false,null,y,n}, %                                |
  basicstyle=\ttfamily\small\color{basic}, %                       |
  keywordstyle=\color{keyword}, %                                  |
  stringstyle=\color{string}, %                                    |
  commentstyle=\itshape\color{comment}, %                          |
  numberstyle=\tiny\color{linenb}, % Line numbers style            |
  showstringspaces=false, % Don't put marks in string spaces       |
  breaklines=true, % Break long lines                              |
  tabsize=2, % How many spaces are a tab                           |
  delim=*[l][\color{param}]{:}, % text after : looks different     |
  moredelim=*[l][\color{item}]{-}, % text after - looks different  |
  literate= %                                                      |
    *{,}{{\textcolor{param}{,}} }1 % commas look different         |
} %                                                                |
% }}}---------------------------------------------------------------

% French code compatibility {{{---------
\lstset{%                              |
  % For straight single quotes         |
  upquote=true,%                       |
  % For French accents in code         |
  extendedchars=true,%                 |
  literate=%                           |
    {é}{{\'e}}1 {É}{{\'E}}1%           |
    {è}{{\`e}}1 {È}{{\`E}}1%           |
    {ê}{{\^e}}1 {Ê}{{\^E}}1%           |
    {à}{{\`a}}1 {À}{{\`A}}1%           |
    {â}{{\^a}}1 {Â}{{\^A}}1%           |
    {ô}{{\^o}}1 {Ô}{{\^O}}1%           |
    {û}{{\^u}}1 {Û}{{\^U}}1%           |
    {î}{{\^i}}1 {Î}{{\^I}}1%           |
    {ç}{{\c c}}1 {Ç}{{\c C}}1%         |
} %                                    |
% }}}-----------------------------------

% Code block definition {{{--------------------------------------------
\newtcblisting{code}[1][]{%                                           |
  enhanced, % Better frame drawing                                    |
  center, % Centered                                                  |
  arc=5mm, % Rounded corners                                          |
  top=0mm, bottom=2mm, left=4mm, right=0mm, % Margins                 |
  colback=bg, % Background color                                      |
  shadow={3mm}{-3mm}{0mm}{fill=bg!50!black!20,opacity=0.7}, % Shadow  |
  listing only, % Only listing text                                   |
  hbox, % Horizontal box                                              |
  #1 % Options                                                        |
} %                                                                   |
% }}}------------------------------------------------------------------


